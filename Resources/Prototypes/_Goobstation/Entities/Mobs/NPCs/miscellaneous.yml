# SPDX-FileCopyrightText: 2024 Aiden <aiden@djkraz.com>
# SPDX-FileCopyrightText: 2024 Aidenkrz <aiden@djkraz.com>
# SPDX-FileCopyrightText: 2024 Piras314 <p1r4s@proton.me>
# SPDX-FileCopyrightText: 2024 Scruq445 <storchdamien@proton.me>
# SPDX-FileCopyrightText: 2024 starch <starchpersonal@gmail.com>
# SPDX-FileCopyrightText: 2025 Aiden <28298836+Aidenkrz@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Armok <155400926+ARMOKS@users.noreply.github.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  name: Skibidi Toilet
  id: MobSkibidiToilet
  parent: SimpleMobBase
  description: Skibidi dop dop dop yes yes
  components:
    - type: NpcFactionMember
      factions:
        - SimpleHostile
    - type: HTN
      rootTask:
        task: SimpleRangedHostileCompound
    - type: Sprite
      drawdepth: Mobs
      sprite: _Goobstation/Mobs/Demons/skibidi.rsi
      layers:
        - map: ["enum.DamageStateVisualLayers.Base"]
          state: alive
    - type: Fixtures
      fixtures:
        fix1:
          shape: !type:PhysShapeCircle
            radius: 0.30
          density: 80
          mask:
            - MobMask
          layer:
            - MobLayer
    - type: DamageStateVisuals
      states:
        Alive:
          Base: alive
        Dead:
          Base: dead
    - type: MobThresholds
      thresholds:
        0: Alive
        100: Dead
    - type: MovementSpeedModifier
      baseWalkSpeed: 1.5 # literally 1984
      baseSprintSpeed: 3.75 # literally 1984
    - type: Tag
      tags:
        - FootstepSound
    - type: HitscanBatteryAmmoProvider
      proto: RedLightLaser
      fireCost: 50
    - type: BatterySelfRecharger
      autoRecharge: true
      autoRechargeRate: 50
    - type: Battery
      maxCharge: 1000
      startingCharge: 1000
    - type: Gun
      fireRate: 1
      selectedMode: SemiAuto
      availableModes:
        - SemiAuto
      soundGunshot: /Audio/_Goobstation/Animals/skibidi.wav
    - type: CombatMode
    - type: InteractionPopup
      successChance: 0.3
      interactSuccessString: petting-success-skibidi-toilet
      interactFailureString: petting-failure-skibidi-toilet
      interactSuccessSound:
        path: /Audio/_Goobstation/Animals/skibidi.wav
    - type: GhostRole
      makeSentient: true
      allowSpeech: true
      allowMovement: true
      name: ghost-role-information-skibidi-toilet-name
      description: ghost-role-information-skibidi-toilet-description
      rules: ghost-role-information-skibidi-toilet-rules
      raffle:
        settings: short
    - type: GhostTakeoverAvailable
    - type: Speech
      speechVerb: SmallMob
      speechSounds: Squeak
    - type: OhioAccent
